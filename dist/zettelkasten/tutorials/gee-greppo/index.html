<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/gee-greppo">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Google Earth Engine and Greppo | Adithya Krishnan</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://krishadi.com.com/zettelkasten/tutorials/gee-greppo"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="snowflake, sql, machine learning, python, data warehouse, large language models, prompt, prompt engineering"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Google Earth Engine and Greppo | Adithya Krishnan"><meta data-rh="true" name="description" content="Geospatial app with Google Earth Engine and Greppo"><meta data-rh="true" property="og:description" content="Geospatial app with Google Earth Engine and Greppo"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://krishadi.com.com/zettelkasten/tutorials/gee-greppo"><link data-rh="true" rel="alternate" href="https://krishadi.com.com/zettelkasten/tutorials/gee-greppo" hreflang="en"><link data-rh="true" rel="alternate" href="https://krishadi.com.com/zettelkasten/tutorials/gee-greppo" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-62QSD7Z9M4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-62QSD7Z9M4",{})</script><link rel="stylesheet" href="/assets/css/styles.4d4d5d8a.css">
<link rel="preload" href="/assets/js/runtime~main.4af16a1f.js" as="script">
<link rel="preload" href="/assets/js/main.60d8bd00.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-light.svg" alt="adithya krishnan" class="themedImage_ToTc themedImage--light_HNdA" style="height:24px"><img src="/img/logo-dark.svg" alt="adithya krishnan" class="themedImage_ToTc themedImage--dark_i4oU" style="height:24px"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Home</a><a class="navbar__item navbar__link" href="/about">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zettelkasten">Zettelkasten</a><a href="https://github.com/krish-adi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo-light.svg" alt="adithya krishnan" class="themedImage_ToTc themedImage--light_HNdA" style="height:24px"><img src="/img/logo-dark.svg" alt="adithya krishnan" class="themedImage_ToTc themedImage--dark_i4oU" style="height:24px"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/zettelkasten/">Zettelkasten</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zettelkasten/python">Python Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zettelkasten/rheology">Rheology</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zettelkasten/machine-learning">Machine Learning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zettelkasten/pandas">Pandas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zettelkasten/deep-learning">Deep Learning</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/zettelkasten/tutorials/">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zettelkasten/tutorials/greppo-introduction">Greppo introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zettelkasten/tutorials/gee-greppo">Google Earth Engine and Greppo</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Geospatial app with Google Earth Engine and Greppo</h1><p><em>March 3, 2022</em></p><blockquote><p><strong>Using Google Earth Engine without a lot of JavaScript experience is hard. Greppo lets you overcome this in Python.</strong></p></blockquote><figure><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/1600/1*HwMJZVVFtFmmrpWokqmoxg.gif" alt="Final web app" class="img_ev3q"></p><figcaption>Figure: The final web-app using Greppo and GEE. Image by author.</figcaption></figure><p>Google Earth Engine is an amazing tool in a data scientists toolbox for working with geospatial data. However, building a web-app with the GEE code editor requires a steep learning curve. The JavaScript based app-creator requires a large investment of time for data scientists who are solely Python developers</p><p>Greppo is the perfect tool to bridge this gap.</p><blockquote><p>In this blog post I will be building a web-application with Greppo with a a popular GEE use-case with DEM(Digital Elevation Model). I will walk you through understanding the basics of GEE, the client-server model, how the API works and the GEE data model. With that background, the post will use Greppo to create an app using GEE’s Python interface and highlight Greppo’s mental model and easy to use interface.</p></blockquote><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>All the code here is in Python. They are ported from the GEE’s sample JavaScript code in the <a href="https://developers.google.com/earth-engine/guides?hl=en" target="_blank" rel="noopener noreferrer">documentation</a></p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2><p>Before we get started, you need to get access to Google Earth Engine. Follow the instruction <a href="https://earthengine.google.com/signup/" target="_blank" rel="noopener noreferrer">here to signup</a> and get access.</p><p>Here is a quick tutorial on Greppo and how to use it: <a href="https://towardsdatascience.com/build-a-geospatial-dashboard-in-python-using-greppo-60aff44ba6c9" target="_blank" rel="noopener noreferrer">Build a geospatial dashboard in Python using Greppo</a></p><p>Next, let’s setup our Python environment to install the dependencies. To understand what Python environments are and how to set it up, <a href="https://krishadi.com/zettelkasten/python.html" target="_blank" rel="noopener noreferrer">read this</a>. Install the following packages into the Python environment.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ pip install earthengine-api greppo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The code for the web-app will go into <strong><em>app.py,</em></strong> and the app is served and run through the command line using the command <code>greppo serve app.py</code> .</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>To run the <code>greppo</code> command in the command line, you need to activate the python environment where greppo is installed. The file app.py can be renamed to anything, but be sure to be in the folder when you run the command <code>greppo serve app.py</code> or in a relative folder structure <code>greppo serve /demo/folder/app.py</code> .</p></div></div><p>Greppo’s GitHub repository: <a href="https://github.com/greppo-io/greppo" target="_blank" rel="noopener noreferrer">https://github.com/greppo-io/greppo</a></p><p>For any issues reach out to us on <a href="https://github.com/greppo-io/greppo" target="_blank" rel="noopener noreferrer">GitHub</a> using ‘issues’ or in the <a href="https://discord.gg/RNJBjgh8gz" target="_blank" rel="noopener noreferrer">Discord channel here</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="gee-authentication-and-initialisation">GEE Authentication and Initialisation<a href="#gee-authentication-and-initialisation" class="hash-link" aria-label="Direct link to GEE Authentication and Initialisation" title="Direct link to GEE Authentication and Initialisation">​</a></h2><p>To be able to use Google Earth Engine, you need to create a service account and get an access-key-file associated with that account. This will only take a few minutes, but make sure to follow the instructions properly. Follow the instructions <a href="https://developers.google.com/earth-engine/guides/service_account?hl=en" target="_blank" rel="noopener noreferrer">here</a>. To use the service account and the key-file, use the following code to initialise.</p><iframe width="100%" frameborder="0" id="gist-b75ef65c43ea13eacac41fe660c54b80"></iframe><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Make sure to keep the key-file.json in another location, preferably safely in the root folder of your computer and not commit it into a public repository.</p></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="understanding-gees-client-server-model">Understanding GEE’s client-server model<a href="#understanding-gees-client-server-model" class="hash-link" aria-label="Direct link to Understanding GEE’s client-server model" title="Direct link to Understanding GEE’s client-server model">​</a></h2><p>As the developer docs of GEE puts it, Earth Engine is not like any GIS or geospatial tool you’ve used before. GEE is primarily a cloud-platform, and all the processing is done in the cloud and not on your machine. The interactions with GEE that you will do are merely instructions that are translated and sent to GEE’s cloud platform. To understand this better, we would have to go through GEE’s Client vs. Server and its lazy computational model.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="client-vsserver"><a href="https://developers.google.com/earth-engine/guides/client_server" target="_blank" rel="noopener noreferrer">Client vs. Server</a><a href="#client-vsserver" class="hash-link" aria-label="Direct link to client-vsserver" title="Direct link to client-vsserver">​</a></h3><p>Let’s start with what I mentioned before, <strong><em>GEE is primarily a cloud-platform</em></strong>. It lets you do all the processing in the cloud. So, how do you access this processing-functions?</p><p>Here is where the <code>earthengine-api</code> library comes to use. The Python package <code>earthengine-api</code> provides objects to the client (which is you) that act as proxy to the server objects which is passed and processed in the cloud.</p><p>To understand the client-server model better, let’s take an example of a String variable in the client and a String variable in the server. On creating a String in the client and printing its type, we get the Python <code>class str</code> object to represent a string. If we want to send a string to the server for use or manipulation in the cloud, we would use the <code>ee.String</code> to wrap up the data in a proxy container which can be read in the server. To be more specific, the <code>ee. objects</code> are an <code>ee.computedObject</code> which is the parent class to the proxy objects.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt; # Client side string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt; client_string = &#x27;I am a Python String object&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt; print(type(client_string))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;class &#x27;str&#x27;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt; # Server side string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt; server_string = ee.String(&#x27;I am proxy ee String object!&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&gt;&gt; print(type(server_string))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;class &#x27;ee.ee_string.String&#x27;&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The proxy objects do not contain any actual data or processing functions/algorithms. They are just handles for the objects on the server (cloud-platform), to merely convey the instructions that are to be executed in the server. Think of it as a way to communicate to the server using code, and to do that you need to wrap the data and instruction in a <code>ee.computedObject</code> container of the specific type.</p><p>This understanding becomes even more relevant when performing loops or using conditional statements on the data. To perform these, the instructions are to be sent to the server to execute them. To understand how these are implemented <a href="https://developers.google.com/earth-engine/guides/client_server" target="_blank" rel="noopener noreferrer">check this page out</a> for more details.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="lazy-computational-model-deferred-execution"><a href="https://developers.google.com/earth-engine/guides/deferred_execution" target="_blank" rel="noopener noreferrer">Lazy computational model (Deferred execution)</a><a href="#lazy-computational-model-deferred-execution" class="hash-link" aria-label="Direct link to lazy-computational-model-deferred-execution" title="Direct link to lazy-computational-model-deferred-execution">​</a></h3><p>So, from the above we know that the <code>earthengine-api</code> package is merely to send instructions to the server. So, how and when does the execution happen?</p><p>The client side library <code>earthengine-api</code> compiles all the instructions into a JSON object and is sent to the server. However, this is not executed immediately. The execution is <em>deferred</em> until there is a request for the result. The request for the result can be a <code>print</code> statement, or the <code>image</code> object to be displayed.</p><p>This on-demand computation as affects what is return to the client (you the user). The result from the earthengine-api is a url to the GEE tile server where the data is to be fetched. So, the images that are within the mentioned area of interest are selectively processed. The area of interest is determined by the zoom level and the center location of the map in the client display. And, as you move and zoom, the images are processed and sent to the client to be viewed. The images are thus computed lazily.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="using-greppo-withgee">Using Greppo with GEE<a href="#using-greppo-withgee" class="hash-link" aria-label="Direct link to Using Greppo with GEE" title="Direct link to Using Greppo with GEE">​</a></h2><p>Using Greppo to display and visualise Earth Engine image objects are fairly straight forward, all you need to use is: <code>app.ee_layer()</code>. The basic data types where geospatial data is stored in GEE is in,</p><ul><li><code>Image</code> : fundamental raster data type in Earth Engine.</li><li><code>ImageCollection</code> : stack or time-series of images.</li><li><code>Geometry</code> : fundamental vector data type in Earth Engine.</li><li><code>Feature</code> : a <code>Geometry</code> with attributes.</li><li><code>FeatureCollection</code> : a set of <code>Feature</code>.</li></ul><p>After understanding the client-server and lazy computational model of GEE, we can extrapolate that these data types are processed on demand, upon the request for its visualisation.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="so-how-to-use-greppo-withgee">So, how to use Greppo with GEE?<a href="#so-how-to-use-greppo-withgee" class="hash-link" aria-label="Direct link to So, how to use Greppo with GEE?" title="Direct link to So, how to use Greppo with GEE?">​</a></h3><p>It is best explained with an example. Let’s start with the scaffolding of the app. You would first have to import the <code>app</code> object from <code>Greppo</code> as this will be your entry point to communicate with the frontend. You would then have to <code>import ee</code>, authenticate yourself to Earth Engine and initialise your session with the credentials from your service account mentioned above.</p><iframe width="100%" frameborder="0" id="gist-02ba22e5623d3b40211f74a51a1b9a4b"></iframe><p>Next, let’s start with selecting the dataset from the catalog. Here, we are using the <code>USGS/SRTMGL1_003</code> to get the Digital Elevation map. We need to first get a land mask for all the values in the DEM image data greater than 0, for which we use <code>dem.get(0)</code>. Next, we need to apply the mask on our DEM to only visualise the land, for which we use <code>dem.updateMask(dem.gt(0))</code> and we assign the result as our <code>ee_dem</code> to be visualised. Since all the data is stored as int16 (matrix of values between 32767 and -32768), we would have to visualise the matrix using a palette.</p><p>To add a palette we create a visualisation parameter object containing the instruction for producing an RGM or greyscale image. Here we use a palette containing the <code>Hex values:[‘006633’, ‘E5FFCC’, ‘662A00’, ‘D8D8D8’, ‘F5F5F5’]</code> and map it linearly to the values corresponding to the <code>min -&gt; #006633</code>and <code>max -&gt; #F5F5F5</code>specified.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The data stored in the DEM is a raster, represented as a matrix and each cell contains the elevation in meters of the point representing the cell.</p></div></div><p>To then visualise this map in the web-application using Greppo, all you need to use is <code>app.ee_layer()</code>. The <code>ee_object</code> is the earth engine image object, <code>vis_param</code> is the visualisation parameter dictionary, <code>name</code> corresponds to the unique identifier which will be used in the web-app frontend, and a <code>description</code> is optional to provide additional direction to the app user. More on this can be found in the documentation <a href="https://docs.greppo.io/map-components/ee-layer.html" target="_blank" rel="noopener noreferrer"><strong><em>here</em></strong></a>.</p><figure><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/1600/1*PsuigXZVNhFxLMhr26Bdag.png" alt="Initial setup" class="img_ev3q"></p><figcaption>Figure: View of the web-app from the above step. Image by author.</figcaption></figure><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="end-to-end-communication-completeweb-app">End-to-end communication: complete web-app<a href="#end-to-end-communication-completeweb-app" class="hash-link" aria-label="Direct link to End-to-end communication: complete web-app" title="Direct link to End-to-end communication: complete web-app">​</a></h2><p>So far we’ve seen how to only visualise the earth engine object in Greppo. However, Greppo is capable of complex interaction between the frontend and backend. Let’s use an example of finding the elevation of a point specified by the user. We’ll be using three of Greppo’s API features.</p><ul><li><code>app.display()</code> : To display a text or markdown in the frontend.</li><li><code>app.number()</code> : A number input feature in the frontend for the user to enter a value. The variable to which it is bound in the backend will be updated to the value specified by the user.</li><li><code>app.text()</code> : A text input feature in the frontend for the user to enter a value. The variable to which it is bound in the backend will be updated to the value specified by the user.</li></ul><p>Refer to the <a href="https://docs.greppo.io/index.html" target="_blank" rel="noopener noreferrer"><strong><em>documentation here</em></strong></a> for more details.</p><p>Let’s start with using the <code>app.display</code> (<code>name</code> is the unique identifier and the value is the text displayed which can be a multiline string) to display some text for guiding the web-app user. After which lets create two number inputs one each for the longitude and latitude of the point using <code>app.number()</code>.</p><p><code>app.number()</code> takes in name, the identifier displayed on the frontend, and value, which is the default value for this element. Next let’s also create a text input for getting the name of the point using <code>app.text()</code> with <code>name</code> and <code>value</code> as mentioned for <code>app.number()</code>.</p><p>Using the latitude and longitude of the point, we can now create an earth engine Geometry object for the point with the visualisation parameters <code>color: ‘red’</code>. We can now display this using the <code>app.ee_layer()</code> as mentioned above.</p><iframe width="100%" frameborder="0" id="gist-a73e7f3496e3c4bbfd350f1be59a8b51"></iframe><p>To find the elevation of the point, we make use of the earth engine method <code>sample</code> on the DEM object. We sample the point in the DEM to get the properties from the DEM. We take the first point from the output and use the <code>.get</code> method to find the value associated with the property <code>elevation</code>. And, finally we compose a multiline string to display the output.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>To center the map to a point and at a zoom level on the initial load, make use of <code>app.map(center=[lat, lon], zoom=level)</code> .</p></div></div><figure><p><img loading="lazy" src="https://cdn-images-1.medium.com/max/1600/1*IZjMibr0FiHjY86vCXC4aQ.png" alt="Greppo&#x27;s interactive feature" class="img_ev3q"></p><figcaption>Figure: View of the web-app with the interaction feature. Image by author.</figcaption></figure><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2><p>Our goal was to create a web-app completely in Python, using the data and computation feature of google earth engine and Greppo’s web-app development library. We went through understanding the working of GEE, understood how to integrate Greppo with GEE. Learnt to use <code>app.ee_layer()</code>, <code>app.display()</code>, <code>app.number()</code> and <code>app.text()</code> to create a complete web-app that communicates end-to-end with the frontend and backend.</p><p>All the files for the demo can be found here: <a href="https://github.com/greppo-io/greppo-demo/tree/main/ee-demo" target="_blank" rel="noopener noreferrer">https://github.com/greppo-io/greppo-demo/tree/main/ee-demo</a></p><blockquote><p>Check out the <a href="https://github.com/greppo-io/greppo" target="_blank" rel="noopener noreferrer"><strong><em>GitHub repository: here</em></strong></a> to be updated on the latest on Greppo. In case of bugs, issues or feature requests for your use-case reach out on the <a href="https://discord.gg/RNJBjgh8gz" target="_blank" rel="noopener noreferrer">Discord channel</a> or open an issue on GitHub. Built something with Greppo? Post it GitHub.</p></blockquote><ul><li>GitHub repository: <a href="https://github.com/greppo-io/greppo" target="_blank" rel="noopener noreferrer">https://github.com/greppo-io/greppo</a></li><li>Documentation: <a href="https://docs.greppo.io/" target="_blank" rel="noopener noreferrer">https://docs.greppo.io/</a></li><li>Website: <a href="https://greppo.io/" target="_blank" rel="noopener noreferrer">https://greppo.io/</a></li></ul><p><em>Originally posted in <a href="https://www.kdnuggets.com/2022/03/building-geospatial-application-python-google-earth-engine-greppo.html" target="_blank" rel="noopener noreferrer">KD Nuggets</a>.</em></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zettelkasten/tags/greppo">greppo</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zettelkasten/tags/gee">gee</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zettelkasten/tags/demo">demo</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/zettelkasten/tags/tutorial">tutorial</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-19T23:00:00.000Z">Mar 19, 2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/zettelkasten/tutorials/greppo-introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Greppo introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a></li><li><a href="#gee-authentication-and-initialisation" class="table-of-contents__link toc-highlight">GEE Authentication and Initialisation</a></li><li><a href="#understanding-gees-client-server-model" class="table-of-contents__link toc-highlight">Understanding GEE’s client-server model</a><ul><li><a href="#client-vsserver" class="table-of-contents__link toc-highlight">Client vs. Server</a></li><li><a href="#lazy-computational-model-deferred-execution" class="table-of-contents__link toc-highlight">Lazy computational model (Deferred execution)</a></li></ul></li><li><a href="#using-greppo-withgee" class="table-of-contents__link toc-highlight">Using Greppo with GEE</a><ul><li><a href="#so-how-to-use-greppo-withgee" class="table-of-contents__link toc-highlight">So, how to use Greppo with GEE?</a></li></ul></li><li><a href="#end-to-end-communication-completeweb-app" class="table-of-contents__link toc-highlight">End-to-end communication: complete web-app</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><div class="container" style="margin-top:2rem;margin-bottom:0.175rem;font-size:0.9rem"><div style="display:flex;flex-direction:row;justify-content:space-between"><div><p>ak © mmxxii</p></div><div><a href="mailto:me@krishadi.com" style="margin:0 0.5rem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="footerIcon"><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"></path></svg></a><a href="https://github.com/krish-adi" style="margin:0 0.5rem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="footerIcon"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://www.linkedin.com/in/adithyakrishnan/" style="margin:0 0.5rem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="footerIcon"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a href="https://twitter.com/krish_adi_" style="margin:0 0.5rem"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="footerIcon"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></div></div></div></div>
<script src="/assets/js/runtime~main.4af16a1f.js"></script>
<script src="/assets/js/main.60d8bd00.js"></script>
</body>
</html>
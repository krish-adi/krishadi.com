"use strict";(self.webpackChunkkrishadi_com=self.webpackChunkkrishadi_com||[]).push([[596],{9409:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>a,default:()=>l,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var o=n(4848),i=n(8453),s=n(7465);const r={slug:"greppo-introduction",title:"Greppo - a geospatial app framework",description:"Build a geospatial dashboard in Python using Greppo",published:"2/24/2022",last_update:{date:"2/24/2022"},tags:["tutorials"]},a="Build a geospatial dashboard in Python using Greppo",d={id:"greppo-introduction",title:"Greppo - a geospatial app framework",description:"Build a geospatial dashboard in Python using Greppo",source:"@site/posts/03-greppo-introduction.md",sourceDirName:".",slug:"/greppo-introduction",permalink:"/posts/greppo-introduction",draft:!1,unlisted:!1,tags:[{inline:!1,label:"Tutorials",permalink:"/posts/tags/tutorials",description:"Some general tutorials on stuff I have built or ones I like."}],version:"current",lastUpdatedAt:16456572e5,sidebarPosition:3,frontMatter:{slug:"greppo-introduction",title:"Greppo - a geospatial app framework",description:"Build a geospatial dashboard in Python using Greppo",published:"2/24/2022",last_update:{date:"2/24/2022"},tags:["tutorials"]},sidebar:"postsSidebar",previous:{title:"Understanding Rheology",permalink:"/posts/rheology"},next:{title:"Google Earth Engine and Greppo",permalink:"/posts/gee-greppo"}},h={},c=[{value:"Greppo",id:"greppo",level:2},{value:"Getting started\u2026",id:"getting-started",level:2},{value:"Scripting the dashboard",id:"scripting-the-dashboard",level:2},{value:"Conclusion",id:"conclusion",level:2}];function p(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"build-a-geospatial-dashboard-in-python-using-greppo",children:"Build a geospatial dashboard in Python using Greppo"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"February 24, 2022"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Lack of frontend, backend and web-dev experience can be limiting in making a web-app in Python. Not anymore\u2026"})}),"\n"]}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*roDG3MBZhff1om23mZmU1w.gif",alt:"Demo GIF"})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"Figure: A geospatial dashboard built using Greppo in Python. Image by author."})})]}),"\n",(0,o.jsxs)(t.p,{children:["Geospatial data analytics have become a common place in data science. Beyond mapping and visualisations, it broadly consists of extracting knowledge by detecting & recognising patterns, and building models for making predictions. Python remains to be a standard among data science, and is no different for geospatial data science. The communities backing projects like ",(0,o.jsx)(t.a,{href:"https://github.com/geopandas/geopandas",children:"GeoPandas"}),", ",(0,o.jsx)(t.a,{href:"https://github.com/shapely/shapely",children:"Shapely"})," and ",(0,o.jsx)(t.a,{href:"https://github.com/rasterio/rasterio",children:"Rasterio"}),", have made Python a go-to for geospatial analytics."]}),"\n",(0,o.jsx)(t.p,{children:"As a data scientist, it is common to work with multiple stakeholders including non-technical ones. The power to distill your research outcomes into a non-technical narrative comes in very handy. It all comes down to communicating how the outcomes could benefit the stakeholders. Creating a dashboard for your Python script is an effective method of story telling. A dashboard also comes in handy when you want to share your work to external stakeholders, limiting them with only the interaction and visualisation, without sharing the internal workings."}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Greppo: A quick and easy way to build geospatial dashboards."})}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsx)(t.h2,{id:"greppo",children:"Greppo"}),"\n",(0,o.jsxs)(t.p,{children:["Greppo is an open-source Python framework for building geospatial web-apps. It provides ready to use frontend and backend components as functions that act as an API between the frontend interactive component and the bound backend variable. To understand more about the mental-model refer to this ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/mental-model.html",children:"page"}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"TL;DR: without much frontend, backend, web-dev experience you can build and deploy a fully functional web-application with basic Python in under 5 minutes."})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["GitHub repository: ",(0,o.jsx)(t.a,{href:"https://github.com/greppo-io/greppo",children:"https://github.com/greppo-io/greppo"})]}),"\n",(0,o.jsxs)(t.li,{children:["Documentation: ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/",children:"https://docs.greppo.io/"})]}),"\n",(0,o.jsxs)(t.li,{children:["Website: ",(0,o.jsx)(t.a,{href:"https://greppo.io/",children:"https://greppo.io/"})]}),"\n"]}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"In this tutorial we will be building a geospatial dashboard in Python using Greppo. We will work through setting up the environment, installation, importing data, putting in the components for our dashboard and serving it. You will be required to know the basics of Python, GeoPandas and geospatial analytics."}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"getting-started",children:"Getting started\u2026"}),"\n",(0,o.jsxs)(t.p,{children:["The first thing to do is install Python and setup your Python environment. For those who are new to this, check out this ",(0,o.jsx)(t.a,{href:"https://krishadi.com/zettelkasten/python.html",children:(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.em,{children:"blog post"})})})," to help you get started on python environments. Once you are ready with that, let\u2019s install our dependencies."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:"$ pip install greppo geopandas\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Download the dataset that you require for this tutorial. All the data and the code for this tutorial can be found here in this GitHub repository: ",(0,o.jsx)(t.a,{href:"https://github.com/greppo-io/greppo-demo/tree/main/vector-demo",children:"greppo-demo/vector-demo"})," (Data source: ",(0,o.jsx)(t.a,{href:"https://github.com/openpolis/geojson-italy",children:"https://github.com/openpolis/geojson-italy"}),")"]}),"\n",(0,o.jsx)(t.h2,{id:"scripting-the-dashboard",children:"Scripting the dashboard"}),"\n",(0,o.jsx)(t.p,{children:"We start with setting up the folder structure for the project. I will be using the following project folder structure:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-shell",children:"\u2514\u2500\u2500 vector-demo\n    \u251c\u2500\u2500 app.py\n    \u251c\u2500\u2500 cities.geojson\n    \u251c\u2500\u2500 regions.geojson\n    \u2514\u2500\u2500 roads.geojson\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Let\u2019s create the Python script for the dashboard. The code for the app goes into ",(0,o.jsx)(t.strong,{children:(0,o.jsx)(t.em,{children:"app.py"})}),"."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Step 0: Serving the app"})}),"\n",(0,o.jsxs)(t.p,{children:["To run and serve the app, open a terminal and follow these instructions. First, change directory (",(0,o.jsx)(t.code,{children:"cd"}),") into the project folder ",(0,o.jsx)(t.code,{children:"vector_demo"}),". Once inside, activate your Python environment where you have ",(0,o.jsx)(t.code,{children:"greppo"})," installed. I am using pyenv here in the example. To then run the app, all you need to do is run ",(0,o.jsx)(t.code,{children:"greppo serve app.py"})," command. The command ",(0,o.jsx)(t.code,{children:"serve"}),", starts the server and compiles the code inside the ",(0,o.jsx)(t.code,{children:"app.py"}),", which can be renamed to any file."]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["Be sure to be inside the project folder where the app.py is, or use a relative folder structure such as ",(0,o.jsx)(t.code,{children:"greppo serve ./vector-demo/app.py"}),"."]})}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*In8t7r2-YJ63ZMkf4Cg7-Q.png",alt:"Greppo CLI"})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"Figure: Running and serving the app from the terminal. Image by Author."})})]}),"\n",(0,o.jsxs)(t.p,{children:["You will then see the Uvicorn server running at a specified location. Copy and paste the address in your browser. Which will then load the app. If you have made any changes to the ",(0,o.jsx)(t.code,{children:"app.py"})," , just save the changes and reload the web-app page. Where you will see the updated changes to your app."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Step 1: Build the basic scaffolding for the app."})}),"\n",(0,o.jsxs)(t.p,{children:["Which is to import the ",(0,o.jsx)(t.code,{children:"greppo"})," package and to add the ",(0,o.jsx)(t.code,{children:"base_layer"})," to the map."]}),"\n",(0,o.jsx)(s.A,{id:"c261a0f21e33e0df5fb80627df252d66"}),"\n",(0,o.jsxs)(t.p,{children:["You need to first ",(0,o.jsx)(t.code,{children:"import app"})," from ",(0,o.jsx)(t.code,{children:"greppo"})," . This ",(0,o.jsx)(t.code,{children:"app"})," object will serve as the interface to to your application frontend and provide the API for 2 way communication between the front and the back-end."]}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*TZh-0l2EpyzniAWrvCMF1A.png",alt:"Greppo Layer Toggle"})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"Figure: Result from Step 1. Using the controls marked in red to toggle. Image by Author."})})]}),"\n",(0,o.jsxs)(t.p,{children:["To add a ",(0,o.jsx)(t.code,{children:"base_layer"})," to your application map, just use the app API method ",(0,o.jsx)(t.code,{children:"app.base_layer()"})," with the required arguments. Refer to the ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/",children:"documentation"})," for what is required and what is optional. The ",(0,o.jsx)(t.code,{children:"base_layer"})," method provides two ways to specify the base tile layer. One is to use the ",(0,o.jsx)(t.code,{children:"name"})," and ",(0,o.jsx)(t.code,{children:"url"})," attributes. The other method is to use the name of a ",(0,o.jsx)(t.code,{children:"provider"}),". Greppo uses ",(0,o.jsx)(t.a,{href:"https://xyzservices.readthedocs.io/en/stable/",children:"xyzservices"})," under the hood for this. For a list of the provider names, check out this list ",(0,o.jsx)(t.a,{href:"https://xyzservices.readthedocs.io/en/stable/introduction.html",children:"here"}),"."]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["The provider name should be complete with its type/variety as in ",(0,o.jsx)(t.code,{children:"CartoDB Positron"})," or ",(0,o.jsx)(t.code,{children:"OpenStreetMap Mapnik"})," ."]})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Step 2: Import the dataset and display it as an overlay."})}),"\n",(0,o.jsxs)(t.p,{children:["Using ",(0,o.jsx)(t.code,{children:"geopandas"})," we can import the vector dataset as a ",(0,o.jsx)(t.code,{children:"GeoDataFrame"}),". This can then be visualised on a map on the web-application using the ",(0,o.jsx)(t.code,{children:"app.vector_layer()"})," method."]}),"\n",(0,o.jsxs)(t.p,{children:["Here I am importing three different datasets one each having ",(0,o.jsx)(t.code,{children:"polygons"})," (boundaries of the different regions of Italy), ",(0,o.jsx)(t.code,{children:"lines"})," (major highways in Italy) and ",(0,o.jsx)(t.code,{children:"points"})," (major cities of Italy)."]}),"\n",(0,o.jsx)(s.A,{id:"34ee2fe8e60f6b0f51f33609aae283d9"}),"\n",(0,o.jsxs)(t.p,{children:["Using the method ",(0,o.jsx)(t.code,{children:"app.vector_layer()"})," as an API to the frontend we can display the vector data. You are required to pass in the ",(0,o.jsx)(t.code,{children:"name"})," and the other parameters are optional. Although, passing in the ",(0,o.jsx)(t.code,{children:"color"})," or ",(0,o.jsx)(t.code,{children:"fillColor"})," to the ",(0,o.jsx)(t.code,{children:"style"})," is a good practise to differentiate and identify each layer. Since the frontend is based on ",(0,o.jsx)(t.a,{href:"https://leafletjs.com/",children:"Leaflet"}),", all the styling is accordance to the leaflet\u2019s specification and can be found in the ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/map-components/vector-layer.html#styling-option-adopted-from-leaflet",children:"documentation"}),"."]}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*fy8xEkHSw1NKGhix7j1nFA.png",alt:"Greppo Control Toggle"})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"Result from Step 2. Using the controls marked in red to toggle."})})]}),"\n",(0,o.jsxs)(t.p,{children:["You can find all the information of the vector_layer and the styling ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/map-components/vector-layer.html",children:"here"}),"."]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["You could also make a Choropleth map. Documentation of which can be found ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/map-components/vector-layer.html#choropleth",children:"here"}),"."]})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Step 3: Displaying in-app text, app-title and app-description"})}),"\n",(0,o.jsxs)(t.p,{children:["For the web-application to be useful, it needs to carry some text to provide some guidance and context to its users. These could be displayed on the sidebar next to the components. Using the method ",(0,o.jsx)(t.code,{children:"app.display()"})," markdown text can be displayed on the web-app. Using the same method, the ",(0,o.jsx)(t.strong,{children:"title"})," and ",(0,o.jsx)(t.strong,{children:"description"})," of the app can be set."]}),"\n",(0,o.jsx)(s.A,{id:"07300a5997971d986c34afd014ada139"}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"app.display()"})," takes in two arguments ",(0,o.jsx)(t.code,{children:"name"})," and ",(0,o.jsx)(t.code,{children:"value"})," . While ",(0,o.jsx)(t.code,{children:"value"})," caries the text to be displayed, ",(0,o.jsx)(t.code,{children:"name"})," has to be unique and carries the identifier to the text. If ",(0,o.jsx)(t.code,{children:"name=\u2019title\u2019"})," the value passed is the title of the app and if ",(0,o.jsx)(t.code,{children:"name=\u2019description\u2019"})," the value passed is the description of the app. Without any of the two, the app carries its default title and description. It is encouraged to set the title and description of the app."]}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*eKievRGQTB40AVjaD8QGjw.png",alt:"App info"})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"Result from Step 3. Using the controls marked in red to toggle. Image by Author."})})]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Step 4: Displaying data as a chart"})}),"\n",(0,o.jsxs)(t.p,{children:["A data app is hardly without display of data as a chart. Greppo also lets you display data as charts. Information of the charts and their usage can be found in the ",(0,o.jsx)(t.a,{href:"https://docs.greppo.io/chart-components/index.html",children:"documentation"}),". Here, as an example a bar-chart is presented, ",(0,o.jsx)(t.code,{children:"app.bar_chart()"}),"."]}),"\n",(0,o.jsx)(s.A,{id:"059b33754a70293e54079b78765ad430"}),"\n",(0,o.jsxs)(t.p,{children:["The required arguments for the charts are the ",(0,o.jsx)(t.code,{children:"name"}),", ",(0,o.jsx)(t.code,{children:"x"})," and ",(0,o.jsx)(t.code,{children:"y"})," values. A ",(0,o.jsx)(t.code,{children:"description"})," and a ",(0,o.jsx)(t.code,{children:"color"})," could be added to give the app user a better context. The ",(0,o.jsx)(t.code,{children:"name"})," and ",(0,o.jsx)(t.code,{children:"description"})," are displayed along with the chart."]}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*UhS3hSF0Q0p6f2LJ4S-mtQ.png",alt:"Full app layout"})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"Result from Step 4. With the data, display features, charts and control. Image by Author."})})]}),"\n",(0,o.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsx)(t.p,{children:"Let\u2019s take complete run through what we\u2019ve done here. Our goal was to create a geospatial web-app using Greppo, to display some GIS vector data, and add components to give the user of the app a better context. Here is the complete code for the app:"}),"\n",(0,o.jsx)(s.A,{id:"dd4ce146785554f6515f49d192e3f2fe"}),"\n",(0,o.jsx)(t.p,{children:"And here the output of the app:"}),"\n",(0,o.jsxs)("figure",{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://miro.medium.com/max/1400/1*roDG3MBZhff1om23mZmU1w.gif",alt:"Geosaptial dashboard built using greppo."})}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(t.p,{children:"The final result. Image by Author."})})]}),"\n",(0,o.jsx)(t.p,{children:"So, there we have it. A complete web-app built using Greppo, in under 5 mins."}),"\n",(0,o.jsxs)(t.p,{children:["All the files for this demo can be found here: ",(0,o.jsx)(t.a,{href:"https://github.com/greppo-io/greppo-demo/tree/main/vector-demo",children:"https://github.com/greppo-io/greppo-demo/tree/main/vector-demo"})]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsxs)(t.em,{children:["Originally posted in ",(0,o.jsx)(t.a,{href:"https://towardsdatascience.com/build-a-geospatial-dashboard-in-python-using-greppo-60aff44ba6c9",children:"Towards Data Science"}),"."]})})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},7465:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(6540),i=n(4848);class s extends o.PureComponent{componentDidMount(){this._updateIframeContent()}componentDidUpdate(e,t){this._updateIframeContent()}_defineUrl(){const{id:e,file:t}=this.props;return`https://gist.github.com/${e}.js${t?`?file=${t}`:""}`}_updateIframeContent(){const{id:e,file:t}=this.props,n=this.iframeNode;let o=n.document;n.contentDocument?o=n.contentDocument:n.contentWindow&&(o=n.contentWindow.document);const i=`<html><head><base target="_parent"><style>*{font-size:12px;}</style></head><body ${`onload="parent.document.getElementById('${t?`gist-${e}-${t}`:`gist-${e}`}').style.height=document.body.scrollHeight + 'px'"`}>${`<script type="text/javascript" src="${this._defineUrl()}"><\/script>`}</body></html>`;o.open(),o.writeln(i),o.close()}render(){const{id:e,file:t}=this.props;return(0,i.jsx)("iframe",{ref:e=>{this.iframeNode=e},width:"100%",frameBorder:0,id:t?`gist-${e}-${t}`:`gist-${e}`})}}const r=s},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var o=n(6540);const i={},s=o.createContext(i);function r(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);